{% extends 'base.html' %}
{% block content %}
<h1>Assistants Verwaltung</h1>
<form method="post" action="{{ url_for('admin.assistants_create') }}" class="form-block">
  <input type="text" name="name" placeholder="Name" required />
  <select name="model">
    {% for m in ['gpt-4.1','gpt-4'] %}
      <option value="{{ m }}">{{ m }}</option>
    {% endfor %}
  </select>
  <input type="text" name="description" placeholder="Beschreibung" />
  <textarea name="instructions" rows="2" placeholder="Instructions"></textarea>
  <button type="submit">Erstellen</button>
</form>
<form method="post" action="{{ url_for('admin.assistants_sync') }}" style="margin-top:0.5rem;">
  <button type="submit">Remote Sync (pull)</button>
</form>
<table class="list" style="margin-top:1rem;">
  <thead>
  <tr><th>ID</th><th>OpenAI ID</th><th>Name</th><th>Model</th><th>Aktionen</th></tr>
  </thead>
  <tbody>
  {% for a in assistants %}
    <tr>
      <td>{{ a.id }}</td>
      <td style="font-size:0.8rem;">{{ a.openai_assistant_id or '-' }}</td>
      <td>{{ a.name }}</td>
      <td>{{ a.model }}</td>
      <td>
        <form method="post" action="{{ url_for('admin.assistants_delete', assistant_id=a.id) }}" onsubmit="return confirm('Löschen?');">
          <button type="submit">Del</button>
        </form>
      </td>
    </tr>
  {% else %}
  <tr><td colspan="5">Keine Assistants</td></tr>
  {% endfor %}
  </tbody>
</table>
<p><a href="{{ url_for('admin.index') }}">Zurück Admin</a></p>
{% endblock %}
